
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#include "tasks.h"

void f (void *arg)
{
  sleep (1);
  printf ("%s\n", (char *)arg);
}

int main (int argc, char *argv[])
{
  int nbthreads = 1;

  if (argc > 1)
    nbthreads = atoi (argv[1]);

  tasks_init (nbthreads);

  tasks_submit (f, "task 1", EXCLUSIVE);
  tasks_submit (f, "task 2", EXCLUSIVE);
  tasks_submit (f, "task 3", REGULAR);

  // Do some workâ€¦

  tasks_wait_all ();

  return 0;
}
