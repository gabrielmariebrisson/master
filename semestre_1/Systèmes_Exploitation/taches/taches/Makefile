.PHONY: clean all

SOURCES	:= $(wildcard *.c)
SOURCES := $(filter-out main.c, $(SOURCES))

PROGS	:= main

CC		:= gcc
CFLAGS	:= -O3 -Wall

all: $(PROGS)

main: main.o tasks.o
	$(CC) -o $@ $^ $(LDFLAGS) $(LDLIBS)

main.o: main.c tasks.h Makefile
	$(CC) -o $@ $(CFLAGS) -c $<

tasks.o: tasks.c tasks.h Makefile
	$(CC) -o $@ $(CFLAGS) -c $<

clean:
	rm -fr $(PROGS) *.o *.dSYM
